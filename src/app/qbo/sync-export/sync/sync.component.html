<div class="internal-loader" fxLayout="column" fxLayoutAlign="center center" *ngIf="isLoading" fxFlexFill>
  <app-loader></app-loader>
</div>

<div *ngIf="!isLoading" fxLayout="column" fxLayoutAlign="start stretch">
  <div class="sync-header">
    Sync Expenses from Fyle App to get Started
  </div>
  <div fxLayout="column" fxLayoutAlign="start center">
    <mat-card class="sync-card">
      <div fxLayout="row" fxLayoutAlign="space-between center">
        <div>
          <div class="sync-card--header">
            Sync Expenses
          </div>
          <div class="sync-card--info" *ngIf="lastTask">
            Synced on {{lastTask.updated_at | date}}
          </div>
        </div>
        <div>
          <button mat-flat-button color="primary" (click)="syncExpenses()">
            <div *ngIf="!isExpensesSyncing">
              Sync Expenses
            </div>
            <div *ngIf="isExpensesSyncing">
              Syncing
            </div>
          </button>
        </div>
      </div>
      <div *ngIf="errorOccurred" class="sync-card--error" fxLayout="row" fxLayoutAlign="start center">
        <mat-icon class="sync-card--error-icon">error</mat-icon>
        <div>
          An error occurred while syncing the expenses. Please try again.
        </div>
      </div>
    </mat-card>
  </div>
</div>